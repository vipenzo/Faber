{
"version":3,
"file":"module$node_modules$codemirror$addon$edit$closebrackets.js",
"lineCount":11,
"mappings":"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",
"sources":["node_modules/codemirror/addon/edit/closebrackets.js"],
"sourcesContent":["shadow$provide[\"module$node_modules$codemirror$addon$edit$closebrackets\"] = function(global,require,module,exports) {\n// CodeMirror, copyright (c) by Marijn Haverbeke and others\n// Distributed under an MIT license: http://codemirror.net/LICENSE\n\n(function(mod) {\n  if (typeof exports == \"object\" && typeof module == \"object\") // CommonJS\n    mod(require(\"../../lib/codemirror\"));\n  else if (typeof define == \"function\" && define.amd) // AMD\n    define([\"../../lib/codemirror\"], mod);\n  else // Plain browser env\n    mod(CodeMirror);\n})(function(CodeMirror) {\n  var defaults = {\n    pairs: \"()[]{}''\\\"\\\"\",\n    triples: \"\",\n    explode: \"[]{}\"\n  };\n\n  var Pos = CodeMirror.Pos;\n\n  CodeMirror.defineOption(\"autoCloseBrackets\", false, function(cm, val, old) {\n    if (old && old != CodeMirror.Init) {\n      cm.removeKeyMap(keyMap);\n      cm.state.closeBrackets = null;\n    }\n    if (val) {\n      ensureBound(getOption(val, \"pairs\"))\n      cm.state.closeBrackets = val;\n      cm.addKeyMap(keyMap);\n    }\n  });\n\n  function getOption(conf, name) {\n    if (name == \"pairs\" && typeof conf == \"string\") return conf;\n    if (typeof conf == \"object\" && conf[name] != null) return conf[name];\n    return defaults[name];\n  }\n\n  var keyMap = {Backspace: handleBackspace, Enter: handleEnter};\n  function ensureBound(chars) {\n    for (var i = 0; i < chars.length; i++) {\n      var ch = chars.charAt(i), key = \"'\" + ch + \"'\"\n      if (!keyMap[key]) keyMap[key] = handler(ch)\n    }\n  }\n  ensureBound(defaults.pairs + \"`\")\n\n  function handler(ch) {\n    return function(cm) { return handleChar(cm, ch); };\n  }\n\n  function getConfig(cm) {\n    var deflt = cm.state.closeBrackets;\n    if (!deflt || deflt.override) return deflt;\n    var mode = cm.getModeAt(cm.getCursor());\n    return mode.closeBrackets || deflt;\n  }\n\n  function handleBackspace(cm) {\n    var conf = getConfig(cm);\n    if (!conf || cm.getOption(\"disableInput\")) return CodeMirror.Pass;\n\n    var pairs = getOption(conf, \"pairs\");\n    var ranges = cm.listSelections();\n    for (var i = 0; i < ranges.length; i++) {\n      if (!ranges[i].empty()) return CodeMirror.Pass;\n      var around = charsAround(cm, ranges[i].head);\n      if (!around || pairs.indexOf(around) % 2 != 0) return CodeMirror.Pass;\n    }\n    for (var i = ranges.length - 1; i >= 0; i--) {\n      var cur = ranges[i].head;\n      cm.replaceRange(\"\", Pos(cur.line, cur.ch - 1), Pos(cur.line, cur.ch + 1), \"+delete\");\n    }\n  }\n\n  function handleEnter(cm) {\n    var conf = getConfig(cm);\n    var explode = conf && getOption(conf, \"explode\");\n    if (!explode || cm.getOption(\"disableInput\")) return CodeMirror.Pass;\n\n    var ranges = cm.listSelections();\n    for (var i = 0; i < ranges.length; i++) {\n      if (!ranges[i].empty()) return CodeMirror.Pass;\n      var around = charsAround(cm, ranges[i].head);\n      if (!around || explode.indexOf(around) % 2 != 0) return CodeMirror.Pass;\n    }\n    cm.operation(function() {\n      var linesep = cm.lineSeparator() || \"\\n\";\n      cm.replaceSelection(linesep + linesep, null);\n      cm.execCommand(\"goCharLeft\");\n      ranges = cm.listSelections();\n      for (var i = 0; i < ranges.length; i++) {\n        var line = ranges[i].head.line;\n        cm.indentLine(line, null, true);\n        cm.indentLine(line + 1, null, true);\n      }\n    });\n  }\n\n  function contractSelection(sel) {\n    var inverted = CodeMirror.cmpPos(sel.anchor, sel.head) > 0;\n    return {anchor: new Pos(sel.anchor.line, sel.anchor.ch + (inverted ? -1 : 1)),\n            head: new Pos(sel.head.line, sel.head.ch + (inverted ? 1 : -1))};\n  }\n\n  function handleChar(cm, ch) {\n    var conf = getConfig(cm);\n    if (!conf || cm.getOption(\"disableInput\")) return CodeMirror.Pass;\n\n    var pairs = getOption(conf, \"pairs\");\n    var pos = pairs.indexOf(ch);\n    if (pos == -1) return CodeMirror.Pass;\n    var triples = getOption(conf, \"triples\");\n\n    var identical = pairs.charAt(pos + 1) == ch;\n    var ranges = cm.listSelections();\n    var opening = pos % 2 == 0;\n\n    var type;\n    for (var i = 0; i < ranges.length; i++) {\n      var range = ranges[i], cur = range.head, curType;\n      var next = cm.getRange(cur, Pos(cur.line, cur.ch + 1));\n      if (opening && !range.empty()) {\n        curType = \"surround\";\n      } else if ((identical || !opening) && next == ch) {\n        if (identical && stringStartsAfter(cm, cur))\n          curType = \"both\";\n        else if (triples.indexOf(ch) >= 0 && cm.getRange(cur, Pos(cur.line, cur.ch + 3)) == ch + ch + ch)\n          curType = \"skipThree\";\n        else\n          curType = \"skip\";\n      } else if (identical && cur.ch > 1 && triples.indexOf(ch) >= 0 &&\n                 cm.getRange(Pos(cur.line, cur.ch - 2), cur) == ch + ch &&\n                 (cur.ch <= 2 || cm.getRange(Pos(cur.line, cur.ch - 3), Pos(cur.line, cur.ch - 2)) != ch)) {\n        curType = \"addFour\";\n      } else if (identical) {\n        if (!CodeMirror.isWordChar(next) && enteringString(cm, cur, ch)) curType = \"both\";\n        else return CodeMirror.Pass;\n      } else if (opening && (cm.getLine(cur.line).length == cur.ch ||\n                             isClosingBracket(next, pairs) ||\n                             /\\s/.test(next))) {\n        curType = \"both\";\n      } else {\n        return CodeMirror.Pass;\n      }\n      if (!type) type = curType;\n      else if (type != curType) return CodeMirror.Pass;\n    }\n\n    var left = pos % 2 ? pairs.charAt(pos - 1) : ch;\n    var right = pos % 2 ? ch : pairs.charAt(pos + 1);\n    cm.operation(function() {\n      if (type == \"skip\") {\n        cm.execCommand(\"goCharRight\");\n      } else if (type == \"skipThree\") {\n        for (var i = 0; i < 3; i++)\n          cm.execCommand(\"goCharRight\");\n      } else if (type == \"surround\") {\n        var sels = cm.getSelections();\n        for (var i = 0; i < sels.length; i++)\n          sels[i] = left + sels[i] + right;\n        cm.replaceSelections(sels, \"around\");\n        sels = cm.listSelections().slice();\n        for (var i = 0; i < sels.length; i++)\n          sels[i] = contractSelection(sels[i]);\n        cm.setSelections(sels);\n      } else if (type == \"both\") {\n        cm.replaceSelection(left + right, null);\n        cm.triggerElectric(left + right);\n        cm.execCommand(\"goCharLeft\");\n      } else if (type == \"addFour\") {\n        cm.replaceSelection(left + left + left + left, \"before\");\n        cm.execCommand(\"goCharRight\");\n      }\n    });\n  }\n\n  function isClosingBracket(ch, pairs) {\n    var pos = pairs.lastIndexOf(ch);\n    return pos > -1 && pos % 2 == 1;\n  }\n\n  function charsAround(cm, pos) {\n    var str = cm.getRange(Pos(pos.line, pos.ch - 1),\n                          Pos(pos.line, pos.ch + 1));\n    return str.length == 2 ? str : null;\n  }\n\n  // Project the token type that will exists after the given char is\n  // typed, and use it to determine whether it would cause the start\n  // of a string token.\n  function enteringString(cm, pos, ch) {\n    var line = cm.getLine(pos.line);\n    var token = cm.getTokenAt(pos);\n    if (/\\bstring2?\\b/.test(token.type) || stringStartsAfter(cm, pos)) return false;\n    var stream = new CodeMirror.StringStream(line.slice(0, pos.ch) + ch + line.slice(pos.ch), 4);\n    stream.pos = stream.start = token.start;\n    for (;;) {\n      var type1 = cm.getMode().token(stream, token.state);\n      if (stream.pos >= pos.ch + 1) return /\\bstring2?\\b/.test(type1);\n      stream.start = stream.pos;\n    }\n  }\n\n  function stringStartsAfter(cm, pos) {\n    var token = cm.getTokenAt(Pos(pos.line, pos.ch + 1))\n    return /\\bstring/.test(token.type) && token.start == pos.ch\n  }\n});\n\n};"],
"names":["shadow$provide","global","require","module","exports","mod","define","amd","CodeMirror","getOption","conf","name","defaults","ensureBound","chars","i","length","ch","charAt","key","keyMap","handler","cm","handleChar","getConfig","deflt","state","closeBrackets","override","getModeAt","mode","getCursor","Pass","pairs","pos","indexOf","triples","identical","ranges","listSelections","opening","type","range","cur","head","next","getRange","Pos","line","empty","curType","isWordChar","enteringString","getLine","isClosingBracket","test","stringStartsAfter","left","right","operation","execCommand","sels","getSelections","replaceSelections","slice","inverted","cmpPos","sel","anchor","setSelections","replaceSelection","triggerElectric","lastIndexOf","charsAround","str","token","getTokenAt","stream","StringStream","start","type1","getMode","explode","defineOption","val","old","Init","removeKeyMap","addKeyMap","Backspace","handleBackspace","around","replaceRange","Enter","handleEnter","linesep","lineSeparator","indentLine"]
}
