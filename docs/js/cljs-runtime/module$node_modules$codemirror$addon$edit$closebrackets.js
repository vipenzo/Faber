shadow$provide.module$node_modules$codemirror$addon$edit$closebrackets=function(global,require,module,exports){(function(mod){"object"==typeof exports&&"object"==typeof module?mod(require("module$node_modules$codemirror$lib$codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],mod):mod(CodeMirror)})(function(CodeMirror){function getOption(conf,name){return"pairs"==name&&"string"==typeof conf?conf:"object"==typeof conf&&null!=conf[name]?conf[name]:defaults[name]}function ensureBound(chars){for(var i=
0;i<chars.length;i++){var ch=chars.charAt(i),key="'"+ch+"'";keyMap[key]||(keyMap[key]=handler(ch))}}function handler(ch){return function(cm){return handleChar(cm,ch)}}function getConfig(cm){var deflt=cm.state.closeBrackets;return!deflt||deflt.override?deflt:cm.getModeAt(cm.getCursor()).closeBrackets||deflt}function handleChar(cm,ch){var conf=getConfig(cm);if(!conf||cm.getOption("disableInput"))return CodeMirror.Pass;var pairs=getOption(conf,"pairs"),pos=pairs.indexOf(ch);if(-1==pos)return CodeMirror.Pass;
conf=getOption(conf,"triples");for(var identical=pairs.charAt(pos+1)==ch,ranges=cm.listSelections(),opening=0==pos%2,type,i$jscomp$0=0;i$jscomp$0<ranges.length;i$jscomp$0++){var range=ranges[i$jscomp$0],cur=range.head,next=cm.getRange(cur,Pos(cur.line,cur.ch+1));if(opening&&!range.empty())range="surround";else if(!identical&&opening||next!=ch)if(identical&&1<cur.ch&&0<=conf.indexOf(ch)&&cm.getRange(Pos(cur.line,cur.ch-2),cur)==ch+ch&&(2>=cur.ch||cm.getRange(Pos(cur.line,cur.ch-3),Pos(cur.line,cur.ch-
2))!=ch))range="addFour";else if(identical)if(!CodeMirror.isWordChar(next)&&enteringString(cm,cur,ch))range="both";else return CodeMirror.Pass;else if(opening&&(cm.getLine(cur.line).length==cur.ch||isClosingBracket(next,pairs)||/\s/.test(next)))range="both";else return CodeMirror.Pass;else range=identical&&stringStartsAfter(cm,cur)?"both":0<=conf.indexOf(ch)&&cm.getRange(cur,Pos(cur.line,cur.ch+3))==ch+ch+ch?"skipThree":"skip";if(!type)type=range;else if(type!=range)return CodeMirror.Pass}var left=
pos%2?pairs.charAt(pos-1):ch,right=pos%2?ch:pairs.charAt(pos+1);cm.operation(function(){if("skip"==type)cm.execCommand("goCharRight");else if("skipThree"==type)for(var i=0;3>i;i++)cm.execCommand("goCharRight");else if("surround"==type){var sels=cm.getSelections();for(i=0;i<sels.length;i++)sels[i]=left+sels[i]+right;cm.replaceSelections(sels,"around");sels=cm.listSelections().slice();for(i=0;i<sels.length;i++){var JSCompiler_temp_const=sels,JSCompiler_temp_const$jscomp$1=i;var JSCompiler_inline_result=
sels[i];var inverted=0<CodeMirror.cmpPos(JSCompiler_inline_result.anchor,JSCompiler_inline_result.head);JSCompiler_inline_result={anchor:new Pos(JSCompiler_inline_result.anchor.line,JSCompiler_inline_result.anchor.ch+(inverted?-1:1)),head:new Pos(JSCompiler_inline_result.head.line,JSCompiler_inline_result.head.ch+(inverted?1:-1))};JSCompiler_temp_const[JSCompiler_temp_const$jscomp$1]=JSCompiler_inline_result}cm.setSelections(sels)}else"both"==type?(cm.replaceSelection(left+right,null),cm.triggerElectric(left+
right),cm.execCommand("goCharLeft")):"addFour"==type&&(cm.replaceSelection(left+left+left+left,"before"),cm.execCommand("goCharRight"))})}function isClosingBracket(ch,pairs){ch=pairs.lastIndexOf(ch);return-1<ch&&1==ch%2}function charsAround(cm,pos){cm=cm.getRange(Pos(pos.line,pos.ch-1),Pos(pos.line,pos.ch+1));return 2==cm.length?cm:null}function enteringString(cm,pos,ch){var line=cm.getLine(pos.line),token=cm.getTokenAt(pos);if(/\bstring2?\b/.test(token.type)||stringStartsAfter(cm,pos))return!1;ch=
new CodeMirror.StringStream(line.slice(0,pos.ch)+ch+line.slice(pos.ch),4);for(ch.pos=ch.start=token.start;;){line=cm.getMode().token(ch,token.state);if(ch.pos>=pos.ch+1)return/\bstring2?\b/.test(line);ch.start=ch.pos}}function stringStartsAfter(cm,pos){cm=cm.getTokenAt(Pos(pos.line,pos.ch+1));return/\bstring/.test(cm.type)&&cm.start==pos.ch}var defaults={pairs:"()[]{}''\"\"",triples:"",explode:"[]{}"},Pos=CodeMirror.Pos;CodeMirror.defineOption("autoCloseBrackets",!1,function(cm,val,old){old&&old!=
CodeMirror.Init&&(cm.removeKeyMap(keyMap),cm.state.closeBrackets=null);val&&(ensureBound(getOption(val,"pairs")),cm.state.closeBrackets=val,cm.addKeyMap(keyMap))});var keyMap={Backspace:function(cm){var conf=getConfig(cm);if(!conf||cm.getOption("disableInput"))return CodeMirror.Pass;var pairs=getOption(conf,"pairs");conf=cm.listSelections();for(var i=0;i<conf.length;i++){if(!conf[i].empty())return CodeMirror.Pass;var around=charsAround(cm,conf[i].head);if(!around||0!=pairs.indexOf(around)%2)return CodeMirror.Pass}for(i=
conf.length-1;0<=i;i--)pairs=conf[i].head,cm.replaceRange("",Pos(pairs.line,pairs.ch-1),Pos(pairs.line,pairs.ch+1),"+delete")},Enter:function(cm){var conf=getConfig(cm);conf=conf&&getOption(conf,"explode");if(!conf||cm.getOption("disableInput"))return CodeMirror.Pass;for(var ranges=cm.listSelections(),i=0;i<ranges.length;i++){if(!ranges[i].empty())return CodeMirror.Pass;var around=charsAround(cm,ranges[i].head);if(!around||0!=conf.indexOf(around)%2)return CodeMirror.Pass}cm.operation(function(){var linesep=
cm.lineSeparator()||"\n";cm.replaceSelection(linesep+linesep,null);cm.execCommand("goCharLeft");ranges=cm.listSelections();for(linesep=0;linesep<ranges.length;linesep++){var line=ranges[linesep].head.line;cm.indentLine(line,null,!0);cm.indentLine(line+1,null,!0)}})}};ensureBound(defaults.pairs+"`")})}
//# sourceMappingURL=module$node_modules$codemirror$addon$edit$closebrackets.js.map
